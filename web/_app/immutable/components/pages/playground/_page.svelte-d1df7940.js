import{S as De,i as xe,s as Ie,k as v,a as R,J as Q,l as k,m as w,h as u,c as M,K as X,n as h,b as j,D as n,B as q,w as te,L as Ce,x as le,y as re,t as W,d as Be,f as $,z as ae,o as Ve,P as Ne,q as P,r as T,N as Z,u as F,M as K,R as Pe,e as ie,T as Te,g as Le}from"../../../chunks/index-2354cca9.js";import{t as ce,N as Ae}from"../../../chunks/navigation-77c4e466.js";import{M as Re}from"../../../chunks/monster-dd2b07aa.js";function Me(c){let e,l,t,r,a,i,s,o,_,y,m,b,I,g,D,V;return{c(){e=v("div"),l=v("div"),t=v("div"),r=R(),a=v("div"),i=v("div"),s=Q("svg"),o=Q("path"),_=R(),y=v("div"),m=R(),b=v("div"),I=R(),g=v("div"),D=R(),V=v("div"),this.h()},l(B){e=k(B,"DIV",{role:!0,class:!0});var L=w(e);l=k(L,"DIV",{class:!0});var C=w(l);t=k(C,"DIV",{class:!0}),w(t).forEach(u),C.forEach(u),r=M(L),a=k(L,"DIV",{class:!0});var p=w(a);i=k(p,"DIV",{class:!0});var x=w(i);s=X(x,"svg",{class:!0,xmlns:!0,"aria-hidden":!0,fill:!0,viewBox:!0});var N=w(s);o=X(N,"path",{d:!0}),w(o).forEach(u),N.forEach(u),x.forEach(u),_=M(p),y=k(p,"DIV",{class:!0}),w(y).forEach(u),m=M(p),b=k(p,"DIV",{class:!0}),w(b).forEach(u),I=M(p),g=k(p,"DIV",{class:!0}),w(g).forEach(u),D=M(p),V=k(p,"DIV",{class:!0}),w(V).forEach(u),p.forEach(u),L.forEach(u),this.h()},h(){h(t,"class","h-3.5 bg-gray-200 rounded-full dark:bg-gray-700"),h(l,"class","bg-gray-800 text-white p-4 mb-5"),h(o,"d","M480 80C480 35.82 515.8 0 560 0C604.2 0 640 35.82 640 80C640 124.2 604.2 160 560 160C515.8 160 480 124.2 480 80zM0 456.1C0 445.6 2.964 435.3 8.551 426.4L225.3 81.01C231.9 70.42 243.5 64 256 64C268.5 64 280.1 70.42 286.8 81.01L412.7 281.7L460.9 202.7C464.1 196.1 472.2 192 480 192C487.8 192 495 196.1 499.1 202.7L631.1 419.1C636.9 428.6 640 439.7 640 450.9C640 484.6 612.6 512 578.9 512H55.91C25.03 512 .0006 486.1 .0006 456.1L0 456.1z"),h(s,"class","w-12 h-12 text-gray-200 dark:text-gray-600"),h(s,"xmlns","http://www.w3.org/2000/svg"),h(s,"aria-hidden","true"),h(s,"fill","currentColor"),h(s,"viewBox","0 0 640 512"),h(i,"class","flex items-center justify-center h-32 w-48 mb-4 bg-gray-300 rounded dark:bg-gray-700"),h(y,"class","h-2.5 bg-gray-200 rounded-full dark:bg-gray-700 mb-4"),h(b,"class","h-2 bg-gray-200 rounded-full dark:bg-gray-700 mb-2.5"),h(g,"class","h-2 bg-gray-200 rounded-full dark:bg-gray-700 mb-2.5"),h(V,"class","h-2 bg-gray-200 rounded-full dark:bg-gray-700"),h(a,"class","p-4"),h(e,"role","status"),h(e,"class","max-w-sm border border-gray-200 rounded shadow animate-pulse dark:border-gray-700")},m(B,L){j(B,e,L),n(e,l),n(l,t),n(e,r),n(e,a),n(a,i),n(i,s),n(s,o),n(a,_),n(a,y),n(a,m),n(a,b),n(a,I),n(a,g),n(a,D),n(a,V)},p:q,i:q,o:q,d(B){B&&u(e)}}}class Se extends De{constructor(e){super(),xe(this,e,null,Me,Ie,{})}}const Oe="wss://pokewar.azurewebsites.net/api/v1/ws";function je(c){return new WebSocket(`${Oe}/${c}`)}function He(){return String.fromCharCode(65+Math.floor(Math.random()*26))+Date.now()}function Ye(c){try{return JSON.parse(c),!0}catch{return!1}}function de(c,e,l){const t=c.slice();return t[23]=e[l],t}function fe(c,e,l){const t=c.slice();return t[26]=e[l],t}function ue(c,e,l){const t=c.slice();return t[29]=e[l],t}function Ue(c,e,l){const t=c.slice();return t[35]=e[l],t}function he(c,e,l){const t=c.slice();return t[32]=e[l],t}function $e(c){let e,l,t,r,a,i,s,o,_=c[5].length>0&&_e(c);return{c(){e=v("div"),l=v("div"),t=v("div"),r=v("button"),a=P("RANDOM PLAYER"),i=R(),_&&_.c(),this.h()},l(y){e=k(y,"DIV",{class:!0});var m=w(e);l=k(m,"DIV",{class:!0});var b=w(l);t=k(b,"DIV",{class:!0});var I=w(t);r=k(I,"BUTTON",{class:!0});var g=w(r);a=T(g,"RANDOM PLAYER"),g.forEach(u),i=M(I),_&&_.l(I),I.forEach(u),b.forEach(u),m.forEach(u),this.h()},h(){h(r,"class","px-4 py-[8px] rounded-md border-solid border-2 text-gray-600 border-gray-400 bg-gray-100 flex items-center gap-2 hover:bg-gray-200 focus:bg-gray-600 focus:text-white text-sm"),h(t,"class","flex flex-row items-center justify-center my-12 gap-2"),h(l,"class","flex flex-col gap-4 items-center justify-center w-full"),h(e,"class","py-4 md:py-7 px-4 md:px-8 xl:px-10 w-full")},m(y,m){j(y,e,m),n(e,l),n(l,t),n(t,r),n(r,a),n(t,i),_&&_.m(t,null),s||(o=Z(r,"click",c[11]),s=!0)},p(y,m){y[5].length>0?_?_.p(y,m):(_=_e(y),_.c(),_.m(t,null)):_&&(_.d(1),_=null)},d(y){y&&u(e),_&&_.d(),s=!1,o()}}}function _e(c){let e,l,t,r;return{c(){e=v("button"),l=P("PLAY BATTLE"),this.h()},l(a){e=k(a,"BUTTON",{class:!0});var i=w(e);l=T(i,"PLAY BATTLE"),i.forEach(u),this.h()},h(){h(e,"class","px-4 py-[8px] rounded-md border-solid border-2 text-gray-600 border-gray-400 bg-gray-100 flex items-center gap-2 hover:bg-gray-200 focus:bg-gray-600 focus:text-white text-sm")},m(a,i){j(a,e,i),n(e,l),t||(r=Z(e,"click",c[12]),t=!0)},p:q,d(a){a&&u(e),t=!1,r()}}}function We(c){let e,l,t=Array(5),r=[];for(let a=0;a<t.length;a+=1)r[a]=ze(Ue(c,t,a));return{c(){e=v("div");for(let a=0;a<r.length;a+=1)r[a].c();this.h()},l(a){e=k(a,"DIV",{class:!0});var i=w(e);for(let s=0;s<r.length;s+=1)r[s].l(i);i.forEach(u),this.h()},h(){h(e,"class","flex flex-wrap gap-8 w-full items-center justify-center")},m(a,i){j(a,e,i);for(let s=0;s<r.length;s+=1)r[s].m(e,null);l=!0},p:q,i(a){if(!l){for(let i=0;i<t.length;i+=1)$(r[i]);l=!0}},o(a){r=r.filter(Boolean);for(let i=0;i<r.length;i+=1)W(r[i]);l=!1},d(a){a&&u(e),K(r,a)}}}function Je(c){let e,l,t=c[5],r=[];for(let i=0;i<t.length;i+=1)r[i]=me(he(c,t,i));const a=i=>W(r[i],1,1,()=>{r[i]=null});return{c(){e=v("div");for(let i=0;i<r.length;i+=1)r[i].c();this.h()},l(i){e=k(i,"DIV",{class:!0});var s=w(e);for(let o=0;o<r.length;o+=1)r[o].l(s);s.forEach(u),this.h()},h(){h(e,"class","flex flex-wrap gap-8 mb-8 w-full items-center justify-center")},m(i,s){j(i,e,s);for(let o=0;o<r.length;o+=1)r[o].m(e,null);l=!0},p(i,s){if(s[0]&1064){t=i[5];let o;for(o=0;o<t.length;o+=1){const _=he(i,t,o);r[o]?(r[o].p(_,s),$(r[o],1)):(r[o]=me(_),r[o].c(),$(r[o],1),r[o].m(e,null))}for(Le(),o=t.length;o<r.length;o+=1)a(o);Be()}},i(i){if(!l){for(let s=0;s<t.length;s+=1)$(r[s]);l=!0}},o(i){r=r.filter(Boolean);for(let s=0;s<r.length;s+=1)W(r[s]);l=!1},d(i){i&&u(e),K(r,i)}}}function ze(c){let e,l;return e=new Se({}),{c(){te(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,r){re(e,t,r),l=!0},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){W(e.$$.fragment,t),l=!1},d(t){ae(e,t)}}}function pe(c){let e,l,t,r,a=c[32].rank+"",i,s,o,_=c[32].point+"",y,m,b,I,g=c[3]&&ge(c);return{c(){e=v("div"),l=v("div"),t=v("div"),r=P("#"),i=P(a),s=R(),o=v("div"),y=P(_),m=P(" pts"),I=R(),g&&g.c(),this.h()},l(D){e=k(D,"DIV",{class:!0});var V=w(e);l=k(V,"DIV",{class:!0});var B=w(l);t=k(B,"DIV",{class:!0});var L=w(t);r=T(L,"#"),i=T(L,a),L.forEach(u),s=M(B),o=k(B,"DIV",{class:!0});var C=w(o);y=T(C,_),m=T(C," pts"),C.forEach(u),B.forEach(u),I=M(V),g&&g.l(V),V.forEach(u),this.h()},h(){h(t,"class","basis-1/2 w-full text-center py-6"),h(o,"class","basis-1/2 w-full text-center py-6"),h(l,"class",b="mt-4 flex flex-row border-2 border-solid divide-x divide-solid w-full "+(c[32].annulled?"border-red-100 bg-red-200":"border-gray-200")),h(e,"class","flex flex-col")},m(D,V){j(D,e,V),n(e,l),n(l,t),n(t,r),n(t,i),n(l,s),n(l,o),n(o,y),n(o,m),n(e,I),g&&g.m(e,null)},p(D,V){V[0]&32&&a!==(a=D[32].rank+"")&&F(i,a),V[0]&32&&_!==(_=D[32].point+"")&&F(y,_),V[0]&32&&b!==(b="mt-4 flex flex-row border-2 border-solid divide-x divide-solid w-full "+(D[32].annulled?"border-red-100 bg-red-200":"border-gray-200"))&&h(l,"class",b),D[3]?g?g.p(D,V):(g=ge(D),g.c(),g.m(e,null)):g&&(g.d(1),g=null)},d(D){D&&u(e),g&&g.d()}}}function ge(c){let e,l,t,r,a;function i(){return c[13](c[32])}return{c(){e=v("button"),l=P("ANNULLED"),this.h()},l(s){e=k(s,"BUTTON",{class:!0});var o=w(e);l=T(o,"ANNULLED"),o.forEach(u),this.h()},h(){h(e,"class","mt-4 px-4 py-[8px] rounded-md border-solid border-2 text-red-600 border-red-400 bg-red-100 flex items-center justify-center gap-2 hover:bg-red-200 focus:bg-red focus:text-white text-sm disabled:bg-red-100 disabled:opacity-25"),e.disabled=t=c[32].annulled},m(s,o){j(s,e,o),n(e,l),r||(a=Z(e,"click",i),r=!0)},p(s,o){c=s,o[0]&32&&t!==(t=c[32].annulled)&&(e.disabled=t)},d(s){s&&u(e),r=!1,a()}}}function qe(c){let e,l=c[32].rank!=null&&c[32].point!=null&&pe(c);return{c(){l&&l.c(),e=R()},l(t){l&&l.l(t),e=M(t)},m(t,r){l&&l.m(t,r),j(t,e,r)},p(t,r){t[32].rank!=null&&t[32].point!=null?l?l.p(t,r):(l=pe(t),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},d(t){l&&l.d(t),t&&u(e)}}}function me(c){let e,l;return e=new Re({props:{monster:c[32],isMiniCard:!0,$$slots:{default:[qe]},$$scope:{ctx:c}}}),{c(){te(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,r){re(e,t,r),l=!0},p(t,r){const a={};r[0]&32&&(a.monster=t[32]),r[0]&40|r[1]&128&&(a.$$scope={dirty:r,ctx:t}),e.$set(a)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){W(e.$$.fragment,t),l=!1},d(t){ae(e,t)}}}function be(c){let e,l,t,r,a,i,s,o,_,y;return{c(){e=v("div"),l=P("Data will reset after "),t=P(c[4]),r=P(`s,
      `),a=v("br"),i=P(`annulled button will be hide after 5s
      `),s=v("br"),o=P(`and data will be proceeded.
      `),_=v("br"),y=P("You can play again the game after 15s."),this.h()},l(m){e=k(m,"DIV",{class:!0});var b=w(e);l=T(b,"Data will reset after "),t=T(b,c[4]),r=T(b,`s,
      `),a=k(b,"BR",{}),i=T(b,`annulled button will be hide after 5s
      `),s=k(b,"BR",{}),o=T(b,`and data will be proceeded.
      `),_=k(b,"BR",{}),y=T(b,"You can play again the game after 15s."),b.forEach(u),this.h()},h(){h(e,"class","mb-5 text-center")},m(m,b){j(m,e,b),n(e,l),n(e,t),n(e,r),n(e,a),n(e,i),n(e,s),n(e,o),n(e,_),n(e,y)},p(m,b){b[0]&16&&F(t,m[4])},d(m){m&&u(e)}}}function ve(c){let e,l,t,r,a,i,s,o,_,y,m,b,I,g,D,V,B,L,C,p=c[6],x=[];for(let f=0;f<p.length;f+=1)x[f]=ke(ue(c,p,f));let N=c[7],O=[];for(let f=0;f<N.length;f+=1)O[f]=ye(fe(c,N,f));let H=c[8],S=[];for(let f=0;f<H.length;f+=1)S[f]=we(de(c,H,f));return{c(){e=v("div"),l=v("div"),t=v("h5"),r=P("Players Eliminated"),a=R(),i=v("div");for(let f=0;f<x.length;f+=1)x[f].c();s=R(),o=v("div"),_=v("h5"),y=P("Battle Logs "),m=v("span"),b=R(),I=v("div");for(let f=0;f<O.length;f+=1)O[f].c();g=R(),D=v("div"),V=v("h5"),B=P("Battle History"),L=R(),C=v("div");for(let f=0;f<S.length;f+=1)S[f].c();this.h()},l(f){e=k(f,"DIV",{class:!0,id:!0});var E=w(e);l=k(E,"DIV",{class:!0});var d=w(l);t=k(d,"H5",{class:!0});var A=w(t);r=T(A,"Players Eliminated"),A.forEach(u),a=M(d),i=k(d,"DIV",{id:!0,class:!0});var J=w(i);for(let U=0;U<x.length;U+=1)x[U].l(J);J.forEach(u),d.forEach(u),s=M(E),o=k(E,"DIV",{class:!0});var z=w(o);_=k(z,"H5",{class:!0});var Y=w(_);y=T(Y,"Battle Logs "),m=k(Y,"SPAN",{id:!0}),w(m).forEach(u),Y.forEach(u),b=M(z),I=k(z,"DIV",{id:!0,class:!0});var se=w(I);for(let U=0;U<O.length;U+=1)O[U].l(se);se.forEach(u),z.forEach(u),g=M(E),D=k(E,"DIV",{class:!0});var G=w(D);V=k(G,"H5",{class:!0});var oe=w(V);B=T(oe,"Battle History"),oe.forEach(u),L=M(G),C=k(G,"DIV",{id:!0});var ne=w(C);for(let U=0;U<S.length;U+=1)S[U].l(ne);ne.forEach(u),G.forEach(u),E.forEach(u),this.h()},h(){h(t,"class","font-bold text-lg mb-4"),h(i,"id","battleroyale-eliminated"),h(i,"class","w-full"),h(l,"class","basis-1/6 w-full p-4"),h(m,"id","log-id"),h(_,"class","font-bold text-lg mb-4"),h(I,"id","battleroyale-logs"),h(I,"class","overflow-y-auto h-96"),h(o,"class","basis-3/5 w-full p-4"),h(V,"class","font-bold text-lg mb-4"),h(C,"id","battleroyale-history"),h(D,"class","basis-1/4 w-full p-4"),h(e,"class","flex w-full h-full rounded-lg border-2 border-solid border-gray-200 divide-x divide-solid"),h(e,"id","battleroyale-playground")},m(f,E){j(f,e,E),n(e,l),n(l,t),n(t,r),n(l,a),n(l,i);for(let d=0;d<x.length;d+=1)x[d].m(i,null);n(e,s),n(e,o),n(o,_),n(_,y),n(_,m),n(o,b),n(o,I);for(let d=0;d<O.length;d+=1)O[d].m(I,null);n(e,g),n(e,D),n(D,V),n(V,B),n(D,L),n(D,C);for(let d=0;d<S.length;d+=1)S[d].m(C,null)},p(f,E){if(E[0]&64){p=f[6];let d;for(d=0;d<p.length;d+=1){const A=ue(f,p,d);x[d]?x[d].p(A,E):(x[d]=ke(A),x[d].c(),x[d].m(i,null))}for(;d<x.length;d+=1)x[d].d(1);x.length=p.length}if(E[0]&128){N=f[7];let d;for(d=0;d<N.length;d+=1){const A=fe(f,N,d);O[d]?O[d].p(A,E):(O[d]=ye(A),O[d].c(),O[d].m(I,null))}for(;d<O.length;d+=1)O[d].d(1);O.length=N.length}if(E[0]&256){H=f[8];let d;for(d=0;d<H.length;d+=1){const A=de(f,H,d);S[d]?S[d].p(A,E):(S[d]=we(A),S[d].c(),S[d].m(C,null))}for(;d<S.length;d+=1)S[d].d(1);S.length=H.length}},d(f){f&&u(e),K(x,f),K(O,f),K(S,f)}}}function ke(c){let e,l=c[29]+"",t;return{c(){e=v("p"),t=P(l)},l(r){e=k(r,"P",{});var a=w(e);t=T(a,l),a.forEach(u)},m(r,a){j(r,e,a),n(e,t)},p(r,a){a[0]&64&&l!==(l=r[29]+"")&&F(t,l)},d(r){r&&u(e)}}}function ye(c){let e,l=c[26]+"",t;return{c(){e=v("p"),t=P(l)},l(r){e=k(r,"P",{});var a=w(e);t=T(a,l),a.forEach(u)},m(r,a){j(r,e,a),n(e,t)},p(r,a){a[0]&128&&l!==(l=r[26]+"")&&F(t,l)},d(r){r&&u(e)}}}function we(c){let e,l=c[23]+"",t;return{c(){e=new Pe(!1),t=ie(),this.h()},l(r){e=Te(r,!1),t=ie(),this.h()},h(){e.a=t},m(r,a){e.m(l,r,a),j(r,t,a)},p(r,a){a[0]&256&&l!==(l=r[23]+"")&&e.p(l)},d(r){r&&u(t),r&&e.d()}}}function Ee(c){let e,l,t,r,a,i,s,o,_,y,m,b,I,g,D,V,B,L,C,p,x,N,O;return{c(){e=v("div"),l=v("div"),t=v("div"),r=v("h5"),a=P("INSTRUCTION"),i=R(),s=v("button"),o=v("span"),_=P("Dismiss"),y=R(),m=Q("svg"),b=Q("path"),I=R(),g=v("p"),D=P("Click [RANDOM PLAYER] Button "),V=v("br"),B=P(` to get random player, after random player displayed.
          `),L=v("br"),C=P("Click [PLAY BATTLE] Button "),p=v("br"),x=P(" to play the battleroyale round. Enjoy your game!"),this.h()},l(H){e=k(H,"DIV",{class:!0});var S=w(e);l=k(S,"DIV",{class:!0});var f=w(l);t=k(f,"DIV",{class:!0});var E=w(t);r=k(E,"H5",{class:!0});var d=w(r);a=T(d,"INSTRUCTION"),d.forEach(u),i=M(E),s=k(E,"BUTTON",{type:!0,class:!0});var A=w(s);o=k(A,"SPAN",{class:!0});var J=w(o);_=T(J,"Dismiss"),J.forEach(u),y=M(A),m=X(A,"svg",{class:!0,xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,"aria-hidden":!0});var z=w(m);b=X(z,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),w(b).forEach(u),z.forEach(u),A.forEach(u),E.forEach(u),I=M(f),g=k(f,"P",{});var Y=w(g);D=T(Y,"Click [RANDOM PLAYER] Button "),V=k(Y,"BR",{}),B=T(Y,` to get random player, after random player displayed.
          `),L=k(Y,"BR",{}),C=T(Y,"Click [PLAY BATTLE] Button "),p=k(Y,"BR",{}),x=T(Y," to play the battleroyale round. Enjoy your game!"),Y.forEach(u),f.forEach(u),S.forEach(u),this.h()},h(){h(r,"class","text-2xl font-bold"),h(o,"class","sr-only"),h(b,"stroke-linecap","round"),h(b,"stroke-linejoin","round"),h(b,"d","M6 18L18 6M6 6l12 12"),h(m,"class","h-6 w-6"),h(m,"xmlns","http://www.w3.org/2000/svg"),h(m,"fill","none"),h(m,"viewBox","0 0 24 24"),h(m,"stroke-width","1.5"),h(m,"stroke","currentColor"),h(m,"aria-hidden","true"),h(s,"type","button"),h(s,"class","-mr-1 flex rounded-md p-2 hover:bg-gray-500 hover:text-white focus:outline-none focus:ring-2 focus:ring-white sm:-mr-2"),h(t,"class","flex items-center justify-between mb-4"),h(l,"class","flex flex-col mx-auto max-w-7xl py-4 px-4 sm:px-6 lg:px-8"),h(e,"class","bg-gray-300 fixed bottom-3 right-3 rounded text-gray-700")},m(H,S){j(H,e,S),n(e,l),n(l,t),n(t,r),n(r,a),n(t,i),n(t,s),n(s,o),n(o,_),n(s,y),n(s,m),n(m,b),n(l,I),n(l,g),n(g,D),n(g,V),n(g,B),n(g,L),n(g,C),n(g,p),n(g,x),N||(O=Z(s,"click",c[14]),N=!0)},p:q,d(H){H&&u(e),N=!1,O()}}}function Ke(c){let e,l,t,r,a,i,s,o,_,y,m,b;document.title=e=ce(ee)+" | Pokewar - Pocket Monster Battleroyale",r=new Ae({props:{title:ee}});let I=$e(c);const g=[Je,We],D=[];function V(p,x){return p[5].length>0?0:1}s=V(c),o=D[s]=g[s](c);let B=c[1]&&be(c),L=c[2]&&ve(c),C=c[0]&&Ee(c);return{c(){l=R(),t=v("section"),te(r.$$.fragment),a=R(),I&&I.c(),i=R(),o.c(),_=R(),B&&B.c(),y=R(),L&&L.c(),m=R(),C&&C.c(),this.h()},l(p){Ce("svelte-3nljpr",document.head).forEach(u),l=M(p),t=k(p,"SECTION",{class:!0});var N=w(t);le(r.$$.fragment,N),a=M(N),I&&I.l(N),i=M(N),o.l(N),_=M(N),B&&B.l(N),y=M(N),L&&L.l(N),m=M(N),C&&C.l(N),N.forEach(u),this.h()},h(){h(t,"class","flex flex-col my-12 w-full h-full")},m(p,x){j(p,l,x),j(p,t,x),re(r,t,null),n(t,a),I&&I.m(t,null),n(t,i),D[s].m(t,null),n(t,_),B&&B.m(t,null),n(t,y),L&&L.m(t,null),n(t,m),C&&C.m(t,null),b=!0},p(p,x){(!b||x&0)&&e!==(e=ce(ee)+" | Pokewar - Pocket Monster Battleroyale")&&(document.title=e),I.p(p,x);let N=s;s=V(p),s===N?D[s].p(p,x):(Le(),W(D[N],1,1,()=>{D[N]=null}),Be(),o=D[s],o?o.p(p,x):(o=D[s]=g[s](p),o.c()),$(o,1),o.m(t,_)),p[1]?B?B.p(p,x):(B=be(p),B.c(),B.m(t,y)):B&&(B.d(1),B=null),p[2]?L?L.p(p,x):(L=ve(p),L.c(),L.m(t,m)):L&&(L.d(1),L=null),p[0]?C?C.p(p,x):(C=Ee(p),C.c(),C.m(t,null)):C&&(C.d(1),C=null)},i(p){b||($(r.$$.fragment,p),$(o),b=!0)},o(p){W(r.$$.fragment,p),W(o),b=!1},d(p){p&&u(l),p&&u(t),ae(r),I&&I.d(),D[s].d(),B&&B.d(),L&&L.d(),C&&C.d()}}}let ee="playground";function Fe(c,e,l){let t=!0,r=!1,a=!1,i=!1,s=15,o,_,y=[],m=[],b=[],I=[];Ve(()=>{_==null&&(_=He()),o=je(_),o.onopen=()=>{g("histories")},o.onmessage=f=>{if(!Ye(f.data))return;const E=JSON.parse(f.data);if(E.status==="error"){alert(E.message);return}switch(E.data_type){case"monsters":D(E.data);break;case"battle_histories":V(E.data);break;case"battle_logs":B(E.data);break;case"eliminated_player":L(E.data);break;case"eliminated_result":C(E.data);break;case"battle_result":p(E.data);break}}});function g(f,E=0){o.readyState===WebSocket.CLOSED&&alert("Websocket connection is closed"),o.send(JSON.stringify({id:_,action:f,data:E}))}const D=f=>l(5,y=f),V=f=>l(8,I=f),B=f=>l(7,b=[f,...b]),L=f=>l(6,m=[f,...m]);function C(f){y.forEach(E=>{const d=f.players.find(A=>A.name.toLowerCase()===E.name.toLowerCase());E.rank=d.rank,E.point=d.point,E.annulled=d.annulled_at>0}),y.sort((E,d)=>E.rank-d.rank),l(5,y)}function p(f){y.forEach(d=>{const A=f.players.find(J=>J.name.toLowerCase()===d.name.toLowerCase());d.rank=A.rank,d.point=A.point}),y.sort((d,A)=>d.rank-A.rank),l(5,y),l(1,r=!0),l(3,i=!0),l(4,s=15);const E=setInterval(()=>{s===10&&(l(3,i=!1),g("save")),s===0&&(g("histories"),l(1,r=!1),clearInterval(E)),l(4,s-=1)},1e3)}const x=f=>g("annulled",f);return Ne(()=>{l(5,y=[])}),[t,r,a,i,s,y,m,b,I,g,x,()=>g("prepare"),()=>{g("start"),l(2,a=!0),l(7,b=[]),l(6,m=[])},f=>x(f.id),()=>{l(0,t=!t)}]}class Ze extends De{constructor(e){super(),xe(this,e,Fe,Ke,Ie,{},null,[-1,-1])}}export{Ze as default};
